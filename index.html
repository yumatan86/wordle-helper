<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Wordle Helper</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      background: #f9f9f9;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
    }
    label {
      display: block;
      margin-bottom: 15px;
      font-weight: bold;
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 18px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
      letter-spacing: 4px;
    }
    button {
      display: block;
      margin: 0 auto 30px auto;
      padding: 12px 40px;
      font-size: 18px;
      background-color: #0078d7;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #005ea3;
    }
    #results {
      background: white;
      padding: 15px 20px;
      border-radius: 6px;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
      min-height: 50px;
    }
    ul {
      margin: 0;
      padding-left: 20px;
      list-style: disc;
      max-height: 300px;
      overflow-y: auto;
    }
    ul li {
      font-size: 16px;
      margin-bottom: 4px;
      word-break: break-word;
    }
  </style>
</head>
<body>
  <h1>Wordle Helper</h1>

  <label for="green">ğŸŸ© ç·‘ï¼ˆæ­£ã—ã„ä½ç½®ï¼‰: <small>ä¾‹: _a__e</small></label>
  <input type="text" id="green" maxlength="5" placeholder="_a__e" />

  <label for="yellow">ğŸŸ¨ é»„ï¼ˆä½ç½®é•ã„ï¼‰: <small>ä¾‹: __r__</small></label>
  <input type="text" id="yellow" maxlength="5" placeholder="__r__" />

  <label for="gray">â¬œ ç°ï¼ˆå«ã¾ã‚Œãªã„æ–‡å­—ï¼‰: <small>ä¾‹: tslpo</small></label>
  <input type="text" id="gray" placeholder="tslpo" />

  <button id="search-btn">æ¤œç´¢</button>

  <div id="results">Loading words...</div>

  <script>
    let wordList = [];

    // å˜èªãƒªã‚¹ãƒˆã‚’JSONã‹ã‚‰èª­ã¿è¾¼ã¿
    async function loadWords() {
      try {
        const res = await fetch("wordle_words.json");
        wordList = await res.json();
        document.getElementById("results").textContent = `å˜èªã‚’${wordList.length}ä»¶èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚`;
      } catch (e) {
        document.getElementById("results").textContent = "å˜èªãƒªã‚¹ãƒˆã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";
        console.error(e);
      }
    }

    // çµã‚Šè¾¼ã¿å‡¦ç†
    function filterWords() {
      const green = document.getElementById("green").value.toLowerCase();
      const yellow = document.getElementById("yellow").value.toLowerCase();
      const graySet = new Set(document.getElementById("gray").value.toLowerCase());

      if (wordList.length === 0) {
        alert("å˜èªãƒªã‚¹ãƒˆãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚");
        return;
      }

      const results = wordList.filter(word => {
        // ç·‘ã®ä½ç½®ãŒåˆã£ã¦ã„ã‚‹ã‹
        for (let i = 0; i < 5; i++) {
          if (green[i] && green[i] !== "_" && word[i] !== green[i]) {
            return false;
          }
        }

        // é»„è‰²ãŒå˜èªã«å«ã¾ã‚Œã¦ã„ã¦ã€ãã®ä½ç½®ã«ã¯ãªã„ã‹
        for (let i = 0; i < 5; i++) {
          if (yellow[i] && yellow[i] !== "_") {
            if (!word.includes(yellow[i]) || word[i] === yellow[i]) {
              return false;
            }
          }
        }

        // ç°è‰²ã¯å˜èªã«å«ã¾ã‚Œã¦ã„ãªã„ã‹ã€‚ãŸã ã—ç·‘ãƒ»é»„ã«å«ã¾ã‚Œã‚‹æ–‡å­—ã¯é™¤å¤–
        for (const ch of graySet) {
          if (green.includes(ch) || yellow.includes(ch)) continue;
          if (word.includes(ch)) return false;
        }

        return true;
      });

      const resultDiv = document.getElementById("results");
      if (results.length === 0) {
        resultDiv.innerHTML = "<p>è©²å½“ã™ã‚‹å˜èªãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>";
      } else {
        resultDiv.innerHTML = `<h3>å€™è£œ (${results.length}ä»¶):</h3><ul>${results.map(w => `<li>${w}</li>`).join('')}</ul>`;
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadWords();

      document.getElementById("search-btn").addEventListener("click", filterWords);
    });
  </script>
</body>
</html>